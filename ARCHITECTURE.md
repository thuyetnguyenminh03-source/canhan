# ğŸ—ï¸ Kiáº¿n TrÃºc Myntex.io.vn

## ğŸ“ SÆ¡ Äá»“ Há»‡ Thá»‘ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MYNTEX.IO.VN                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   WEB FRONTEND          â”‚           â”‚   ADMIN PANEL            â”‚
â”‚   (Public)              â”‚           â”‚   (Private)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ index.html              â”‚           â”‚ admin/login.php          â”‚
â”‚ assets/css/style.css    â”‚           â”‚ admin/dashboard.php      â”‚
â”‚ assets/js/main.js       â”‚           â”‚ admin/projects.php       â”‚
â”‚ assets/js/load-projects.js          â”‚ admin/services.php       â”‚
â”‚ assets/js/dark-mode.js  â”‚           â”‚ admin/testimonials.php   â”‚
â”‚ assets/js/image-modal.js            â”‚ admin/timeline.php       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ admin/skills.php         â”‚
           â†“                          â”‚ admin/contact.php        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚   APIS   â”‚                           â†“
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ /api/    â”‚                  â”‚  SESSION/AUTH            â”‚
        â”‚ site.php â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ bootstrap.php            â”‚
        â”‚          â”‚                  â”‚ login.php (verify)       â”‚
        â”‚project.php                  â”‚ CSRF tokens              â”‚
        â”‚          â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â†“
           â†“                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  PASSWORD MANAGEMENT     â”‚
        â”‚   DATABASE               â”‚  â”‚  password-manager.php    â”‚
        â”‚   MYSQL                  â”‚  â”‚  change-admin-password   â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  forgot-password.php     â”‚
        â”‚ acegiove_portfolio       â”‚  â”‚  check-token.php         â”‚
        â”‚                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ Tables:                  â”‚
        â”‚ â”œâ”€ hero                  â”‚
        â”‚ â”œâ”€ timeline              â”‚
        â”‚ â”œâ”€ services              â”‚
        â”‚ â”œâ”€ skills                â”‚
        â”‚ â”œâ”€ contact_info          â”‚
        â”‚ â”œâ”€ footer_links          â”‚
        â”‚ â”œâ”€ projects              â”‚
        â”‚ â”œâ”€ project_media         â”‚
        â”‚ â”œâ”€ testimonials          â”‚
        â”‚ â””â”€ admins âœ… (Fixed)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Request Flow

### **Frontend Request Flow**

```
User Browser
    â†“
index.html (Static)
    â†“
assets/js/main.js
    â†“
fetch(/api/site.php) â† AJAX
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ api/site.php     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Config load    â”‚
â”‚ - DB connect âœ…  â”‚
â”‚ - Query data:    â”‚
â”‚   â€¢ hero         â”‚
â”‚   â€¢ timeline     â”‚
â”‚   â€¢ projects     â”‚
â”‚   â€¢ testimonials â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
JSON Response
    â†“
JavaScript render
    â†“
User sees website ğŸ‰
```

### **Admin Request Flow**

```
Admin Browser
    â†“
admin/login.php (Form)
    â†“
POST /admin/login.php
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bootstrap.php        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Config load        â”‚
â”‚ - DB connect âœ…      â”‚
â”‚ - Verify CSRF        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ login.php validate   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Query: SELECT FROM   â”‚
â”‚ admins WHERE ...âœ…   â”‚
â”‚ password_verify()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
Session create
    â†“
admin/dashboard.php
    â†“
Admin sees dashboard ğŸ‰
```

---

## ğŸ”§ Component Breakdown

### **1. Frontend (Public)**
```
index.html (Entry point)
    â”œâ”€ Header (Navigation)
    â”œâ”€ Hero Section (Image + Text)
    â”œâ”€ About Section (Timeline)
    â”œâ”€ Projects Section (Grid + Modal)
    â”œâ”€ Services Section (Cards)
    â”œâ”€ Skills Section (Logos)
    â”œâ”€ Testimonials Section (Carousel)
    â”œâ”€ Contact Section (Form)
    â””â”€ Footer

Data Source: /api/site.php â†’ JSON
```

### **2. API Layer**
```
/api/
â”œâ”€ site.php
â”‚  â””â”€ Returns: hero, timeline, services, skills, 
â”‚              contact_info, footer, projects, testimonials
â”‚
â””â”€ project.php
   â”œâ”€ Parameter: ?slug=project-slug
   â””â”€ Returns: project details, media, testimonials
```

### **3. Admin Panel**
```
/admin/
â”œâ”€ bootstrap.php (Config + DB + Auth)
â”œâ”€ login.php (Authentication)
â”œâ”€ dashboard.php (Main page)
â”œâ”€ projects.php (CRUD projects)
â”œâ”€ project-media.php (Upload images)
â”œâ”€ services.php (CRUD services)
â”œâ”€ skills.php (CRUD skills)
â”œâ”€ timeline.php (CRUD experience)
â”œâ”€ testimonials.php (CRUD testimonials)
â”œâ”€ contact.php (Manage contact messages)
â”œâ”€ hero-edit.php (Edit hero section)
â”œâ”€ password-manager.php (Password management)
â”œâ”€ forgot-password.php (Password reset)
â”œâ”€ check-token.php (Verify reset token)
â”œâ”€ change-admin-password.php (Change password)
â””â”€ security-dashboard.php (Security info)
```

### **4. Database (MySQL)**
```
acegiove_portfolio
â”œâ”€ hero (1 row)
â”‚  â””â”€ greeting, headline, subhead, typewriter_text, links
â”‚
â”œâ”€ timeline (Multiple rows)
â”‚  â””â”€ time_range, company, description_vi/en, sort_order
â”‚
â”œâ”€ services (Multiple rows)
â”‚  â””â”€ title_vi/en, description_vi/en, sort_order
â”‚
â”œâ”€ skills (Multiple rows)
â”‚  â””â”€ name, logo_url, sort_order
â”‚
â”œâ”€ contact_info (1 row)
â”‚  â””â”€ phone, email, address_vi/en, social links
â”‚
â”œâ”€ projects (Multiple rows)
â”‚  â””â”€ slug, title_vi/en, description, meta, KPIs, sort_order
â”‚
â”œâ”€ project_media (Multiple rows)
â”‚  â””â”€ project_id, section, url, title, sort_order
â”‚
â”œâ”€ testimonials (Multiple rows)
â”‚  â””â”€ project_id, author_name, author_title, content_vi/en
â”‚
â””â”€ admins âœ… (Fixed)
   â””â”€ username, password_hash, created_at
```

---

## ğŸ” Security Architecture

### **Authentication Flow**
```
User Input (username/password)
    â†“
POST /admin/login.php
    â”œâ”€ Verify CSRF token âœ…
    â”œâ”€ Query: SELECT * FROM admins WHERE username = ?
    â”œâ”€ password_verify($input, hash) âœ…
    â””â”€ Session start âœ…
        â†“
    $_SESSION['admin_user'] = username
        â†“
    Redirect to dashboard
```

### **Password Reset Flow**
```
/admin/forgot-password.php
    â”œâ”€ Generate reset_token (random 32 bytes) âœ…
    â”œâ”€ Set reset_expires (+1 hour) âœ…
    â”œâ”€ UPDATE admins SET reset_token, reset_expires
    â”œâ”€ Send email with reset link
    â”‚  â””â”€ If SMTP fails â†’ Save to reset_password_link.txt
    â””â”€ User clicks link
        â”œâ”€ Verify token is valid & not expired
        â”œâ”€ User enters new password
        â”œâ”€ Password hash with bcrypt âœ…
        â””â”€ UPDATE admins SET password_hash
```

### **CSRF Protection**
```
Each form:
â”œâ”€ Generate csrf_token (random 32 bytes) âœ…
â”œâ”€ Store in $_SESSION['csrf_token']
â”œâ”€ Include <input hidden> in form âœ…
â””â”€ On submit: verify_csrf_or_die() âœ…
```

---

## ğŸ“Š Data Flow

### **Hero Section**
```
Database (hero table)
    â†“
GET /api/site.php
    â†“
SELECT * FROM hero LIMIT 1
    â†“
JSON response
    â†“
index.html â†’ JavaScript render
    â†“
User sees hero section with greeting, headline, typewriter effect
```

### **Projects Section**
```
Database (projects + project_media tables)
    â†“
GET /api/site.php
    â†“
SELECT p.id, p.slug, p.title FROM projects
SELECT url FROM project_media WHERE section='cover'
    â†“
JSON response with projects array
    â†“
JavaScript:
  â€¢ Loop projects
  â€¢ Load project.html via fetch(/api/project.php?slug=xxx)
  â€¢ Display in modal
    â†“
User can click, see details, view gallery
```

---

## ğŸ› Bug Fixes Applied

### **Bug #1: Database Connection**
```
BEFORE:
config.php â†’ 'user' => 'root', 'pass' => ''
    â†“
MySQL error: Connection failed
    â†“
Website broken ğŸ’¥

AFTER:
config.php â†’ 'user' => 'acegiove_portfolio', 'pass' => 'thuyet164'
    â†“
MySQL connected âœ…
    â†“
Website works ğŸ‰
```

### **Bug #2: Admin Queries**
```
BEFORE:
admin/login.php â†’ SELECT * FROM admin_users WHERE ...
    â†“
Table not found error ğŸ’¥
    â†“
Admin panel broken

AFTER:
admin/login.php â†’ SELECT * FROM admins WHERE ...
    â†“
Query succeeds âœ…
    â†“
Admin panel works ğŸ‰
```

---

## ğŸš€ Deployment Architecture

### **File Structure on Server**
```
/home/acegiove/public_html/
â”œâ”€ index.html (Frontend entry)
â”œâ”€ config.php âœ… (DB credentials)
â”œâ”€ CHECK_STATUS.php (Health check)
â”‚
â”œâ”€ admin/
â”‚  â”œâ”€ bootstrap.php (Auth)
â”‚  â”œâ”€ login.php âœ…
â”‚  â”œâ”€ dashboard.php
â”‚  â””â”€ ... (other admin files)
â”‚
â”œâ”€ api/
â”‚  â”œâ”€ site.php (Main API)
â”‚  â””â”€ project.php (Project API)
â”‚
â”œâ”€ assets/
â”‚  â”œâ”€ css/
â”‚  â”‚  â””â”€ style.css
â”‚  â”œâ”€ js/
â”‚  â”‚  â”œâ”€ main.js
â”‚  â”‚  â”œâ”€ load-projects.js
â”‚  â”‚  â””â”€ dark-mode.js
â”‚  â””â”€ img/
â”‚      â””â”€ ... (images)
â”‚
â”œâ”€ uploads/ (Writable)
â”‚  â””â”€ ... (uploaded media)
â”‚
â”œâ”€ database/
â”‚  â””â”€ migrate.sql (Init script)
â”‚
â””â”€ sql/
   â””â”€ schema.sql âœ…
```

---

## ğŸ”— Environment Config

### **Local Development**
```
config.php:
  host: localhost
  user: root
  pass: (empty)
  
â†’ Works with XAMPP/MAMP
```

### **cPanel Production** âœ… (Current)
```
config.php:
  host: localhost
  user: acegiove_portfolio
  pass: thuyet164
  
â†’ Production ready
```

---

## ğŸ“ˆ Performance Considerations

### **Optimization Done**
- âœ… Database indexes on common queries (slug, username)
- âœ… JSON response caching (can be added)
- âœ… CSS/JS minification (assets folder)
- âœ… Image optimization (via postimg.cc CDN)

### **Optimization Pending** (Optional)
- â³ Add Redis caching for API responses
- â³ Implement database query result caching
- â³ CDN for static assets
- â³ Lazy loading for project images
- â³ Compression middleware

---

## ğŸ“Š Status Summary

| Component | Status | Notes |
|-----------|--------|-------|
| Frontend | âœ… OK | HTML + CSS + JS |
| APIs | âœ… OK | /api/site.php & /api/project.php |
| Admin Panel | âœ… OK | Login, CRUD, Password reset |
| Database | âœ… OK | MySQL with 9 tables |
| Security | âœ… OK | CSRF, bcrypt, sessions |
| Deployment | âœ… OK | cPanel ready |

---

**Architecture Version:** 1.0  
**Last Updated:** 18/11/2025  
**Status:** Production Ready ğŸš€
